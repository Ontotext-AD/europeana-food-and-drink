<!--Start fiter accordion template-->
<script type="text/ng-template" id="accordion-template.html">
    <div class="panel {{panelClass || 'panel-default'}}">
        <div class="panel-heading" style="padding: 0;">
            <h5 class="panel-title pointer" ng-click="toggleOpen()" style="padding: 10px 15px;" ng-class="{'not-allowed': isDisabled}">
                <span href tabindex="0" class="accordion-toggle" accordion-transclude="heading">
                    <span ng-class="{'text-muted': isDisabled}">{{heading}}</span>
                </span>
                <i class="pull-right fa" ng-class="{'fa-chevron-down': isOpen, 'fa-chevron-right': !isOpen}"></i>
            </h5>
        </div>
        <div class="panel-collapse collapse" collapse="!isOpen">
            <div class="panel-body" ng-transclude style="padding: 0; overflow-y: auto; max-height: 300px;"></div>
        </div>
    </div>
</script>
<!--End fiter accordion template-->
<div class="row one-edge-shadow">
    <div class="hidden-xs hidden-sm col-md-2" style="margin: 20px 0;">
        <a href="/"><img src="/app/resources/images/efd.png" class="img-responsive"/></a>
    </div>
    <div class="col-xs-12 col-md-10">
        <h1>Europeana Food & Drink</h1>
        <p>Some ... probably text</p>
        <form search-form id="search-query-form" name="searchForm"></form>
    </div>
</div>
<div class="row  one-edge-shadow" style="background: #fff; margin-bottom: 40px;">
    <div class="col-xs-6 col-sm-4">

        <div class="panel panel-default">
            <div class="panel-heading">Selected filters</div>
            <div class="panel-body">
                <span ng-if="activeFilters.length == 0 && activeArticles.length == 0 && activeCatefories == 0">No active filters</span>
                <ul class="list-group" >
                    <li class="list-group-item pointer" ng-repeat="article in activeArticles" ng-click="removeArticle(article)">
                        <i>Article:</i> {{article}}
                        <i class="fa fa-times"></i>
                    </li>
                    <li class="list-group-item pointer" ng-repeat="category in activeCategories" ng-click="removeCategory(category)">
                        <i>Category:</i> {{category}}
                        <i class="fa fa-times"></i>
                    </li>
                    <li class="list-group-item pointer" ng-repeat="filter in activeFilters" ng-click="removeFilter(filter.categoryName, filter.facetName)">
                        {{filter.facetName}}
                        <i class="fa fa-times"></i>
                    </li>
                </ul>
            </div>
        </div>

        <accordion id="food-and-drink">
            <accordion-group is-open="true" template-url="accordion-template.html" heading="Food and Drink">
                        <div ng-show="categoriesLoader" class="ot-loader" onto-loader  size="30"> </div>

                        <div ng-hide="categoriesLoader" style="padding-top: 15px;">

                            <span ng-if="!categories">Categories are not loaded</span>

                            <category-collection collection='categories'></category-collection>
                        </div>
            </accordion-group>
        </accordion>

        <accordion id="filters" close-others="false">
            <accordion-group ng-repeat="filter in filtersCategories" is-disabled="filter.isDisabled" is-open="filter.open" template-url="accordion-template.html" heading="{{filter.title}}">
                <ul class="list-group" style="margin:0">
                    <li class="list-group-item" ng-repeat="filterElement in filter.data | orderBy:'facetName'" style="padding:0; -webkit-border-radius: 0;-moz-border-radius: 0;border-radius: 0;">
                        <div class="checkbox pointer" style="padding: 0; margin: 0;">
                            <label style="width: 100%; padding: 10px 20px 10px 40px">
                                <input type="checkbox" ng-model="filterElement.checked"  ng-change="addRemoveFilter(filter.id, filterElement.id)">
                                {{filterElement.facetName}}
                                <span class="badge">{{filterElement.facetValue}}</span>
                            </label>
                        </div>
                    </li>
                </ul>
            </accordion-group>
        </accordion>
    </div>
    <div ng-show="loader" class="ot-loader ot-main-loader" onto-loader  size="50"></div>
    <div ng-hide="loader" class="col-xs-6 col-sm-8 ">
        <div class="row" ng-if="data" style="padding-bottom: 20px;">
            <div class="col-xs-4">
                <div class="btn-group pull-left" dropdown keyboard-nav>
                    <button id="simple-btn-keyboard-nav" type="button" class="btn btn-primary col-xs-12" dropdown-toggle>
                        Results per page: {{limit}} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="simple-btn-keyboard-nav" style="max-width:100px;">
                        <li role="menuitem"><a href="#" ng-click="changeLimit(12)">12</a></li>
                        <li role="menuitem"><a href="#" ng-click="changeLimit(24)">24</a></li>
                        <li role="menuitem"><a href="#" ng-click="changeLimit(48)">48</a></li>
                        <li role="menuitem"><a href="#" ng-click="changeLimit(96)">96</a></li>
                        <!--TODO <li role="menuitem"><a href="#" ng-click="changeLimit()">All</a></li>-->
                    </ul>
                </div>
            </div>
            <div class="col-xs-4 text-center" ng-hide="countLoader">
                Results {{offset + 1}} - {{offset + limit > count ? count : offset + limit}} of {{count}}
            </div>
            <div class="col-xs-4 text-right" ng-show="limit < count && !countLoader">
                Page
                <input type="number" ng-model="results.page" min="1" max="{{totalPages}}" ng-mode="page" ng-change="changePage()">
                of {{totalPages}}
            </div>
            <div class="col-xs-8 ot-loader" onto-loader  size="20" ng-if="countLoader"></div>
        </div>
        <div id="results-holder" class="row" ng-if="data">
            <div class="col-sm-6 col-md-4 pointer" ng-repeat="result in data.searchResults" ng-click="loadResource(result.resource)">
                <div class="thumbnail">
                    <div class="image-holder img-thumbnail ">
                        <span>
                            <img class="img-responsive" ng-if="!result.picture" alt="{{result.title}}" src="app/resources/images/default.png"/>
                            <img class="img-responsive" ng-if="result.picture" ng-src="{{result.picture}}" alt="{{result.title}}" onError="this.src = 'app/resources/images/default.png';"/>
                        </span>
                    </div>
                    <div class="caption">
                        <h3 ng-if="result.title">{{result.title}}</h3>
                        <p>{{result.description}}</p>
                   </div>
                </div>
            </div>
        </div>
        <div ng-if="!data">
            <h3 class="text-center bg-warning text-danger" style="padding: 15px;">No results</h3>
        </div>
    </div>
</div>